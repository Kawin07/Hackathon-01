<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==" crossorigin="anonymous" referrerpolicy="no-referrer" />   
</head>
    <style>
        /* Basic Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
        }

        /* Body and General Styling */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f7f7f7;
            color: #333;
            text-align: center;
            line-height: 1.6;
            --color1: #FFF ;
            --color2: #181818 ;
        }

        .nav-bar {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    list-style: none;
    position: sticky;
    background-color: var(--color2);
    padding: 12px 20px;
}

.logo-container {
    display: flex;
    align-items: center;
    text-decoration: none;
}

.logo-img {
    width: 80px; /* Adjust the size of the logo */
    height: auto;
    margin-right: 15px;
}

.logo-text {
    font-size: 10px;
    font-weight: bold;
    color: white;
    text-transform: uppercase;
}
.menu {
    position: relative;
    display: flex;
    z-index: 200;
}
.menu li {padding-left: 30px;}
.menu li a {
    display: inline-block;
    text-decoration: none;
    color: var(--color1);
    text-align: center;
    transition: 0.15s ease-in-out;
    position: relative;
    text-transform: uppercase;
}
.menu li a::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 1px;
    background-color: var(--color1);
    transition: 0.15s ease-in-out;
}
.menu li a:hover:after {width: 100%;}
.open-menu , .close-menu {
    position: absolute;
    color: var(--color1);
    cursor: pointer;
    font-size: 1.5rem;
    display: none;
}
.open-menu {
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
}
.close-menu {
    top: 43px;
    right: 30px;
}
#check {display: none;}


        h2 {
            color: #333;
        }
        .container {
            width: 90%;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }
        /* Search bar styling */
        .search-container {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
        }
        .search-container input {
            width: 50%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        /* Filter inputs */
        .filters {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        .filter-input {
            width: 150px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        .table-container {
            overflow-x: auto;
            width: 100%;
        } 
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 16px;
            text-align: left;
            min-width: 800px; /* Ensures scrolling on small screens */
        }

        th, td {
            padding: 12px;
            border: 1px solid #ddd;
        }

        th {
            background-color: #007bff;
            color: white;
            text-transform: uppercase;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tr:hover {
            background-color: #f1f1f1;
        }
        @media (max-width: 768px) {
            .table-container {
                overflow-x: auto;
            }

            table {
                width: 100%;
                min-width: 700px; /* Ensures columns stay readable */
            }
        }
       

        

        .problem-description p,
.expected-solutions p {
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 6; /* Show only 6 lines initially */
    -webkit-box-orient: vertical;
    max-height: 180px;
    transition: all 0.3s ease;
}

.problem-description.expanded p,
.expected-solutions.expanded p {
    -webkit-line-clamp: unset; /* Show the full text */
    max-height: none;
}

/* Show More text */
.show-more {
    display: inline-block;
    color: #007bff;
    cursor: pointer;
    font-size: 14px;
    text-decoration: underline;
    margin-top: 10px;
}

.show-more:hover {
    color: #0056b3;
}




    .button {
    position: relative;
    overflow: hidden;
    height: 3rem;
    padding: 0 2rem;
    border-radius: 1.5rem;
    background: #3d3a4e;
    background-size: 400%;
    color: #fff;
    border: none;
    cursor: pointer;
  }
  
  .button:hover::before {
    transform: scaleX(1);
  }
  
  .button-content {
    position: relative;
    z-index: 1;
  }
  
  .button::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    transform: scaleX(0);
    transform-origin: 0 50%;
    width: 100%;
    height: inherit;
    border-radius: inherit;
    background: linear-gradient(
      82.3deg,
      rgba(150, 93, 233, 1) 10.8%,
      rgba(99, 88, 238, 1) 94.3%
    );
    transition: all 0.475s;
  }
  

        /* Responsive Styles */
        @media (max-width: 768px) {
            .search-container input {
                width: 80%;
            }

            .filters {
                flex-direction: column;
                align-items: center;
            }

            .filter-input {
                width: 90%;
                margin-bottom: 10px;
            }

            table {
                font-size: 14px;
            }

            th, td {
                padding: 8px;
            }

            .pagination a {
                padding: 8px 10px;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .search-container input {
                width: 100%;
            }

            .filters {
                flex-direction: column;
                align-items: center;
            }

            .filter-input {
                width: 100%;
                margin-bottom: 10px;
            }

            table {
                font-size: 12px;
            }

            th, td {
                padding: 6px;
            }

            .pagination a {
                padding: 6px 8px;
                font-size: 12px;
            }

            .logo-text {
                font-size: 12px;
            }

            .logo-text-1 {
                font-size: 20px;
            }

            .logo-text-2 {
                font-size: 10px;
            }

            .logo-text-3 {
                font-size: 8px;
            }

            .logo-text-4 {
                font-size: 7px;
            }

            .logo-text-5 {
                font-size: 7px;
            }
        }

        @media (max-width: 823px) {
    
    .menu {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 80%;
        opacity: .9;
        height: 100vh;
        position: fixed;
        top: 0;
        right: -100%;  
        z-index: 9999;
        background-color: var(--color2);
        transition: all 0.2s ease-in-out;
    }

    .menu li {
        margin-top: 40px;
    }

    .menu li a {
        padding: 10px;
    }

    .open-menu,
    .close-menu {
        display: block;
    }

    #check:checked ~ .menu {
        right: 0;
    }
}

    </style>
</head>
<body>

    <header>
        <nav>
            <ul class="nav-bar">
                <li class="logo" style="display: flex;">
                    <a href='#'>
                        <img style="width: 80px; height: auto;" src="{{ url_for('static', filename='logo1.png') }}" />
                    </a>
                    <div class="logo-text" style="display: flex; flex-direction: column;">
                        <span class="logo-text-1" style="font-size: 27px; letter-spacing: 5px; line-height: 30px;">PANIMALAR</span>
                        <span class="logo-text-2" style="font-size:14px; letter-spacing: 2px; word-spacing: -4px;">ENGINEERING COLLEGE</span>
                        <span class="logo-text-3" style="text-align: center; padding-right: 10px; background-color: red;">An Autonomous Institute</span>
                        <span class="logo-text-4" style="font-size: 9px;">Affiliated To Anna University, Chennai</span>
                        <span class="logo-text-5" style="text-align: center;">(JAISAKTHI EDUCATIONAL TRUST)</span>
                    </div>
                </li>
                <input type="checkbox" id="check" />
                <span class="menu">
                    <li><a href="{{ url_for('index') }}">Home</a></li>
                    <li><a href="{{ url_for('guidelines') }}">Guidelines</a></li>
                    <li><a href="{{ url_for('hackathon') }}">Statements</a></li>
                    <li><a href="{{ url_for('faqs') }}">FAQs</a></li>
                    <li><a href="{{ url_for('contactus') }}">Contact</a></li>
                    <label for="check" class="close-menu"><i class="fas fa-times"></i></label>
                </span>
                <label for="check" class="open-menu"><i class="fas fa-bars"></i></label>
            </ul>
        </nav>
    </header>
    
    <!-- Problem Statements Section -->
    <div class="container Statements">
        <h2>~Problem Statements~</h2>
    
        <!-- Search Bar -->
        <div class="search-container">
            <input type="text" id="searchBar" placeholder="Search for any keyword..." onkeyup="filterTable()">
        </div>
    
        <!-- Filters (Dropdowns for Domain, Theme, Category) -->
        <div class="filters">
            <select id="domainFilter" class="filter-input" onchange="filterTable()">
                <option value="">Select Domain</option>
                {% for domain in domains %}
                    <option value="{{ domain }}">{{ domain }}</option>
                {% endfor %}
            </select>
    
            <select id="themeFilter" class="filter-input" onchange="filterTable()">
                <option value="">Select Theme</option>
                {% for theme in themes %}
                    <option value="{{ theme }}">{{ theme }}</option>
                {% endfor %}
            </select>
    
            <select id="categoryFilter" class="filter-input" onchange="filterTable()">
                <option value="">Select Category</option>
                {% for category in categories %}
                    <option value="{{ category }}">{{ category }}</option>
                {% endfor %}
            </select>
    
            <button class="button">
                <span class="button-content">Download </span>
            </button>
        </div>
    
        <!-- Table Container -->
        <div class="table-container">
            <table id="problemTable">
                <thead>
                    <tr>
                        <th>Sr. No</th>
                        <th>Ps No.</th>
                        <th>Problem Title</th>
                        <th>Domain</th>
                        <th>Theme</th>
                        <th>Category</th>
                        <th>Problem Description</th>
                        <th>Expected Solutions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for problem in problems %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ problem['Column1'] }}</td>
                        <td>{{ problem['Title'] }}</td>
                        <td>{{ problem['Domain'] }}</td>
                        <td>{{ problem.get('Theme', 'N/A') }}</td>
                        <td>{{ problem['Category'] }}</td>
                        <td>
                            <div class="problem-description" id="desc{{ loop.index }}">
                                <p>{{ problem['Problem Description:'] }}</p>
                                <span class="show-more" onclick="toggleDescription({{ loop.index }})">Show More</span>
                            </div>
                        </td>
                        
                        <td>
                            <div class="expected-solutions" id="solution{{ loop.index }}">
                                <p>{{ problem['Expected solution'] }}</p>
                                <span class="show-more" onclick="toggleSolution({{ loop.index }})">Show More</span>
                            </div>
                        </td>
                        
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="footer-overlay">
            <div class="footer-content">
                <div class="footer-left">
                    <img src="{{ url_for('static', filename='logo1.png') }}" alt="College Logo" class="college-logo">
                    <h3>PANIMALAR ENGINEERING COLLEGE</h3>
                    <p>An Autonomous Institution, affiliated to Anna University</p>
                    <p>Bangalore Trunk Road, Poonamallee,<br>Chennai 600 123.</p>
                </div>
    
                <div class="footer-right">
                    <p>Contact us using</p>
                    <p>
                        <span class="icon">ðŸ“ž</span> 044 -26490404 <br>
                        <span class="icon">âœ‰</span> <a href="mailto:peccsehackathon@gmail.com">peceehack@gmail.com</a>
                    </p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Designed and Developed by <a href="#">EEE Boys</a></p>
                <p>Follow us on</p>
                <div class="card">
                    <!-- Social links here -->
                </div>
            </div>
        </div>
    </footer>
    <script>
        function filterTable() {
    let searchQuery = document.getElementById("searchBar").value.toLowerCase().trim();
    let domainFilter = document.getElementById("domainFilter").value.toLowerCase().trim();
    let themeFilter = document.getElementById("themeFilter").value.toLowerCase().trim();
    let categoryFilter = document.getElementById("categoryFilter").value.toLowerCase().trim();

    let table = document.getElementById("problemTable");
    let rows = table.getElementsByTagName("tr");

    for (let i = 1; i < rows.length; i++) {
        let cells = rows[i].getElementsByTagName("td");

        if (cells.length < 7) continue; // Skip invalid rows

        let psNo = cells[1].innerText.toLowerCase();
        let title = cells[2].innerText.toLowerCase();
        let domain = cells[3].innerText.toLowerCase();
        let theme = cells[4].innerText.toLowerCase();
        let category = cells[5].innerText.toLowerCase();
        let description = cells[6].innerText.toLowerCase();
        let solutions = cells[7].innerText.toLowerCase();

        let rowText = `${psNo} ${title} ${domain} ${theme} ${category} ${description} ${solutions}`;
        
        let searchTerms = searchQuery.split(" ").filter(term => term !== "");
        let searchMatch = searchTerms.every(term => rowText.includes(term));

        let domainMatch = domainFilter === "" || domain === domainFilter;
        let themeMatch = themeFilter === "" || theme === themeFilter;
        let categoryMatch = categoryFilter === "" || category === categoryFilter;

        rows[i].style.display = (searchMatch && domainMatch && themeMatch && categoryMatch) ? "" : "none";
    }
}


        document.addEventListener("DOMContentLoaded", function () {
    const downloadButton = document.querySelector(".button");
    const buttonContent = document.querySelector(".button-content");

    downloadButton.addEventListener("click", function () {
      buttonContent.textContent = "Downloading...";

      // Corrected file path: The file must be inside /static for access
      const fileUrl = "static/Book1.xlsx"; 
      const link = document.createElement("a");
      link.href = fileUrl;
      link.download = "Book1.xlsx";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);

      buttonContent.textContent = "Download Complete";

      // Reset back to "Download" after 5 seconds
      setTimeout(() => {
        buttonContent.textContent = "Download";
      }, 2500);
    });
  });

  function toggleDescription(index) {
        var desc = document.getElementById("desc" + index);
        var btn = desc.querySelector(".show-more");
        if (desc.classList.contains("expanded")) {
            desc.classList.remove("expanded");
            btn.textContent = "Show More";
        } else {
            desc.classList.add("expanded");
            btn.textContent = "Show Less";
        }
    }

    // Toggle the Expected Solutions visibility
    function toggleSolution(index) {
        var solution = document.getElementById("solution" + index);
        var btn = solution.querySelector(".show-more");
        if (solution.classList.contains("expanded")) {
            solution.classList.remove("expanded");
            btn.textContent = "Show More";
        } else {
            solution.classList.add("expanded");
            btn.textContent = "Show Less";
        }
    }
    </script>
</body>
</html>
